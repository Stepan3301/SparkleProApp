<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Booking Stack Animation</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #e3f2fd 0%, #f0f8ff 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    }
    .stack-container {
      width: 340px;
      position: relative;
      height: 420px;
      display: flex;
      align-items: flex-start;
      justify-content: center;
      cursor: pointer;
      user-select: none;
    }
    .stack-label {
      position: absolute;
      top: -38px;
      left: 0;
      font-size: 18px;
      color: #00897b;
      font-weight: 700;
      letter-spacing: 0.5px;
      z-index: 10;
      transition: color 0.3s;
    }
    .booking-card {
      position: absolute;
      left: 0;
      width: 100%;
      height: 80px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 16px rgba(0,150,136,0.10);
      display: flex;
      align-items: center;
      padding: 0 22px;
      gap: 18px;
      transition: box-shadow 0.3s, background 0.3s;
      border: 1px solid #e0f2f1;
      z-index: 1;
      cursor: pointer;
      opacity: 1;
      will-change: transform, opacity;
    }
    .booking-card .icon {
      width: 38px;
      height: 38px;
      border-radius: 10px;
      background: linear-gradient(135deg, #4dd0e1 0%, #26c6da 100%);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }
    .booking-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .booking-title {
      font-size: 15px;
      font-weight: 600;
      color: #263238;
    }
    .booking-meta {
      font-size: 12px;
      color: #607d8b;
      margin-top: 2px;
    }
    .booking-amount {
      font-size: 16px;
      font-weight: 700;
      color: #00897b;
    }
    .booking-date {
      font-size: 13px;
      color: #90a4ae;
      margin-left: 10px;
    }
    .stack-container.collapsed .booking-card {
      transition: transform 0.5s cubic-bezier(.68,-0.55,.27,1.55), box-shadow 0.3s, opacity 0.3s;
    }
    .stack-container.expanded .booking-card {
      transition: transform 0.7s cubic-bezier(.22,1.61,.36,1), box-shadow 0.3s, opacity 0.3s;
    }
    .stack-container.collapsed .booking-card {
      pointer-events: auto;
    }
    .stack-container.expanded .booking-card {
      pointer-events: auto;
    }
    /* Rope effect */
    .rope {
      position: absolute;
      left: 50%;
      top: -30px;
      width: 4px;
      height: 30px;
      background: linear-gradient(180deg, #b2ebf2 60%, #00897b 100%);
      border-radius: 2px;
      z-index: 20;
      transform: translateX(-50%);
    }
    .rope-ball {
      position: absolute;
      left: 50%;
      top: -38px;
      width: 18px;
      height: 18px;
      background: #00897b;
      border-radius: 50%;
      transform: translateX(-50%);
      z-index: 21;
      box-shadow: 0 2px 8px #00897b33;
      border: 2px solid #e0f7fa;
    }
  </style>
</head>
<body>
  <div class="stack-container collapsed" id="stack">
    <div class="stack-label">Bookings</div>
    <div class="rope"></div>
    <div class="rope-ball"></div>
    <div class="booking-card" style="z-index:6;">
      <div class="icon"><i class="fas fa-broom"></i></div>
      <div class="booking-info">
        <div class="booking-title">Large Cleaning</div>
        <div class="booking-meta">#15 • 14 Aug</div>
      </div>
      <div class="booking-amount">₿1334</div>
    </div>
    <div class="booking-card" style="z-index:5;">
      <div class="icon"><i class="fas fa-broom"></i></div>
      <div class="booking-info">
        <div class="booking-title">Medium Cleaning</div>
        <div class="booking-meta">#14 • 31 Jul</div>
      </div>
      <div class="booking-amount">₿385</div>
    </div>
    <div class="booking-card" style="z-index:4;">
      <div class="icon"><i class="fas fa-broom"></i></div>
      <div class="booking-info">
        <div class="booking-title">Small Cleaning</div>
        <div class="booking-meta">#13 • 29 Jul</div>
      </div>
      <div class="booking-amount">₿1269</div>
    </div>
    <div class="booking-card" style="z-index:3;">
      <div class="icon"><i class="fas fa-broom"></i></div>
      <div class="booking-info">
        <div class="booking-title">Window Cleaning</div>
        <div class="booking-meta">#12 • 30 Jul</div>
      </div>
      <div class="booking-amount">₿414</div>
    </div>
    <div class="booking-card" style="z-index:2;">
      <div class="icon"><i class="fas fa-broom"></i></div>
      <div class="booking-info">
        <div class="booking-title">Deep Cleaning</div>
        <div class="booking-meta">#11 • 30 Jul</div>
      </div>
      <div class="booking-amount">₿345</div>
    </div>
    <div class="booking-card" style="z-index:1;">
      <div class="icon"><i class="fas fa-broom"></i></div>
      <div class="booking-info">
        <div class="booking-title">Express Cleaning</div>
        <div class="booking-meta">#10 • 28 Jul</div>
      </div>
      <div class="booking-amount">₿299</div>
    </div>
  </div>
  <script>
    const stack = document.getElementById('stack');
    const cards = Array.from(stack.querySelectorAll('.booking-card'));
    let expanded = false;

    function setStackPositions(expand) {
      cards.forEach((card, i) => {
        if (!expand) {
          // Stack: random small offsets, overlap
          const offset = i * 4;
          const rot = (Math.random() - 0.5) * 6;
          card.style.transform = `translateY(${offset}px) rotate(${rot}deg)`;
          card.style.opacity = 1 - i * 0.07;
          card.style.pointerEvents = i === 0 ? 'auto' : 'none';
        } else {
          // Rope ladder: cards drop down with staggered animation
          card.style.transitionDelay = `${i * 0.08}s`;
          card.style.transform = `translateY(${i * 90 + 10}px) rotate(0deg)`;
          card.style.opacity = 1;
          card.style.pointerEvents = 'auto';
        }
      });
    }

    setStackPositions(false);

    stack.addEventListener('click', function(e) {
      if (!expanded) {
        stack.classList.remove('collapsed');
        stack.classList.add('expanded');
        setStackPositions(true);
        expanded = true;
      }
    });

    // Optional: collapse back on outside click
    document.body.addEventListener('click', function(e) {
      if (expanded && !stack.contains(e.target)) {
        stack.classList.remove('expanded');
        stack.classList.add('collapsed');
        setStackPositions(false);
        expanded = false;
      }
    });
  </script>
</body>
</html>
